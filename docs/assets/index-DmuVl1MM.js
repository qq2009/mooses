import{U as B,V as U,W as o,X as $,Y as C,Z as M,r as T,_ as w,s as b,n as v,j as p,S as I,o as V,d as N,w as y,e as O,m as q,f,c as x,a as z,h as k,k as D}from"./index-DZFCHy6p.js";import{_ as A}from"./plugin-vueexport-helper-DlAUqK2U.js";function j(){return document.createElement("div")}function P(l){return{isTeleporting:!1,teleportTarget:document.body,onMount:null,...l}}function E(l,t={},a={}){let r=1;const e=new Map,n=P(a),u=U();if(!u)throw new Error("useDynamic 必须在 setup 函数中调用");const{appContext:g}=u;function c(d,F={},S={}){const _=j(),m=o(l,{...t,...S},d?()=>o(d,F):null);m.appContext=g;try{if(n.isTeleporting&&n.teleportTarget){const h=o($,{to:n.teleportTarget},[m]);C(h,_)}else C(m,_);typeof n.onMount=="function"&&n.onMount(m.el);const i=r++;return e.set(i,()=>{C(null,_),e.delete(i)}),function(){e.has(i)&&e.get(i)()}}catch(i){console.error("组件渲染时出现错误:",i)}}function s(){e.forEach(d=>d()),e.clear()}return B(()=>{s()}),{load:c,destroyAll:s}}function R(l){return{title:"表单对话框",width:"500px",initialFormData:{},rules:{},onSubmit:null,onCancel:null,...l}}function W(l={}){const t=R(l),{load:a,destroyAll:r}=E(w),e=M({...t.initialFormData}),n=T(null);function u(){a(o(I,{model:e,rules:t.rules,ref:n},()=>[o(b,{label:"用户名",prop:"username"},()=>[o(v,{modelValue:e.username,"onUpdate:modelValue":s=>e.username=s})]),o(b,{label:"邮箱",prop:"email"},()=>[o(v,{modelValue:e.email,"onUpdate:modelValue":s=>e.email=s})]),o("div",{class:"dialog-footer"},[o(p,{onClick:c},"取消"),o(p,{type:"primary",onClick:g},"提交")])]),{},{title:t.title,width:t.width,modelValue:!0,appendToBody:!0,onClosed:c})}function g(){n.value.validate(s=>{s&&typeof t.onSubmit=="function"&&(t.onSubmit(e),r())})}function c(){typeof t.onCancel=="function"&&t.onCancel(),r()}return{loadForm:u}}const X={__name:"dialog-test",setup(l){const t=T(!0);return(a,r)=>(V(),N(f(w),q({modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=e=>t.value=e)},a.$attrs),{default:y(()=>[O(a.$slots,"default")]),_:3},16,["modelValue"]))}},Y={},Z={class:"content"};function G(l,t){return V(),x("div",Z,t[0]||(t[0]=[z("h2",null,"测试111111",-1)]))}const H=A(Y,[["render",G]]),J={class:"dynamic container"},Q={__name:"index",setup(l){const t=E(X,{title:"Tips",width:"500"},{isTeleporting:!0}),{loadForm:a}=W({title:"用户信息表单",initialFormData:{username:"",email:""},rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"}]},onSubmit(e){console.log("表单提交的数据:",e)},onCancel(){console.log("表单取消")}});function r(){const e=t.load(H,{},{onClosed(){e()}})}return(e,n)=>(V(),x("div",J,[k(f(p),{onClick:r},{default:y(()=>n[0]||(n[0]=[D("测试")])),_:1}),k(f(p),{onClick:f(a)},{default:y(()=>n[1]||(n[1]=[D("打开动态表单")])),_:1},8,["onClick"])]))}};export{Q as default};

import{V as S,W as $,X as o,Y as U,Z as C,_ as M,r as D,$ as w,v as b,p as h,k as f,T as I,o as V,e as N,w as y,f as O,m as q,g as p,c as x,a as z,i as T,l as k}from"./index-DLZnTZAL.js";import{_ as A}from"./plugin-vueexport-helper-DlAUqK2U.js";function P(){return document.createElement("div")}function R(l){return{isTeleporting:!1,teleportTarget:document.body,onMount:null,...l}}function E(l,t={},a={}){let r=1;const e=new Map,n=R(a),u=$();if(!u)throw new Error("useDynamic 必须在 setup 函数中调用");const{appContext:g}=u;function c(d,F={},B={}){const _=P(),m=o(l,{...t,...B},d?()=>o(d,F):null);m.appContext=g;try{if(n.isTeleporting&&n.teleportTarget){const v=o(U,{to:n.teleportTarget},[m]);C(v,_)}else C(m,_);typeof n.onMount=="function"&&n.onMount(m.el);const s=r++;return e.set(s,()=>{C(null,_),e.delete(s)}),function(){e.has(s)&&e.get(s)()}}catch(s){console.error("组件渲染时出现错误:",s)}}function i(){e.forEach(d=>d()),e.clear()}return S(()=>{i()}),{load:c,destroyAll:i}}function W(l){return{title:"表单对话框",width:"500px",initialFormData:{},rules:{},onSubmit:null,onCancel:null,...l}}function X(l={}){const t=W(l),{load:a,destroyAll:r}=E(w),e=M({...t.initialFormData}),n=D(null);function u(){a(o(I,{model:e,rules:t.rules,ref:n},()=>[o(b,{label:"用户名",prop:"username"},()=>[o(h,{modelValue:e.username,"onUpdate:modelValue":i=>e.username=i})]),o(b,{label:"邮箱",prop:"email"},()=>[o(h,{modelValue:e.email,"onUpdate:modelValue":i=>e.email=i})]),o("div",{class:"dialog-footer"},[o(f,{onClick:c},"取消"),o(f,{type:"primary",onClick:g},"提交")])]),{},{title:t.title,width:t.width,modelValue:!0,appendToBody:!0,onClosed:c})}function g(){n.value.validate(i=>{i&&typeof t.onSubmit=="function"&&(t.onSubmit(e),r())})}function c(){typeof t.onCancel=="function"&&t.onCancel(),r()}return{loadForm:u}}const Y={__name:"dialog-test",setup(l){const t=D(!0);return(a,r)=>(V(),N(p(w),q({modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=e=>t.value=e)},a.$attrs),{default:y(()=>[O(a.$slots,"default")]),_:3},16,["modelValue"]))}},Z={},j={class:"content"};function G(l,t){return V(),x("div",j,t[0]||(t[0]=[z("h2",null,"测试111111",-1)]))}const H=A(Z,[["render",G]]),J={class:"dynamic container"},Q={__name:"index",setup(l){const t=E(Y,{title:"Tips",width:"500"},{isTeleporting:!0}),{loadForm:a}=X({title:"用户信息表单",initialFormData:{username:"",email:""},rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"}]},onSubmit(e){console.log("表单提交的数据:",e)},onCancel(){console.log("表单取消")}});function r(){const e=t.load(H,{},{onClosed(){e()}})}return(e,n)=>(V(),x("div",J,[T(p(f),{onClick:r},{default:y(()=>n[0]||(n[0]=[k("测试")])),_:1}),T(p(f),{onClick:p(a)},{default:y(()=>n[1]||(n[1]=[k("打开动态表单")])),_:1},8,["onClick"])]))}};export{Q as default};
